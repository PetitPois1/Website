<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Clicker</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #1b2a1d;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 5px;
            color: #66cc66;
            text-shadow: 2px 2px #000;
        }
        .stats-container {
            text-align: center;
            margin-bottom: 20px;
        }
        .circle {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, #006400 0%, #004d00 100%);
            border: 4px solid #66cc66;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 0 20px rgba(102, 204, 102, 0.2);
            transition: transform 0.05s linear;
        }
        .circle:active {
            transform: scale(0.92);
        }
        .shop {
            width: 90%;
            max-width: 500px;
            margin: 20px auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }
        .shop-item-container {
            margin-bottom: 15px;
            border-bottom: 1px solid #2d4a30;
            padding-bottom: 10px;
        }
        .shop-item {
            width: 100%;
            background-color: #004d00;
            color: white;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid #66cc66;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .shop-item:hover:not(.disabled) {
            background-color: #66cc66;
            color: #000;
        }
        .shop-item.disabled {
            background-color: #333;
            border-color: #555;
            color: #888;
            cursor: not-allowed;
            opacity: 0.7;
        }
        .upgrade-count {
            font-size: 0.9rem;
            color: #66cc66;
            margin-top: 5px;
            font-weight: bold;
        }
        .reset-button {
            margin-top: 30px;
            background-color: #631c1c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        .back-button {
            margin-top: 15px;
            color: #888;
            text-decoration: none;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <h1>Industrial Clicker</h1>
    
    <div class="stats-container">
        <p style="font-size: 1.5rem;">Clicks: <span id="clickCount">0</span></p>
        <p style="color: #66cc66;">Per Second: <span id="cpsCount">0</span></p>
    </div>

    <div class="circle" id="circle">+1</div>

    <div class="shop">
        <h2>Industrial Exchange</h2>
        <div id="shop-list">
            </div>
    </div>

    <button class="reset-button" id="resetButton">Wipe Save Data</button>
    <a href="index.html" class="back-button">Back to Home</a>

    <script>
        // --- GAME DATA ---
        let clicks = 0;
        let clickValue = 1;
        let autoClickValue = 0;

        const upgradeData = {
            upgradeClick: { name: "Broken Tool", baseCost: 10, addClick: 1, addAuto: 0 },
            autoClicker: { name: "Worker", baseCost: 50, addClick: 0, addAuto: 1 },
            goldenClick: { name: "Rusty Tool", baseCost: 100, addClick: 5, addAuto: 0 },
            superAutoClicker: { name: "Qualified Worker", baseCost: 200, addClick: 0, addAuto: 5 },
            megaClick: { name: "Metal Tool", baseCost: 500, addClick: 10, addAuto: 0 },
            ultraAutoClicker: { name: "Manager", baseCost: 1000, addClick: 0, addAuto: 20 },
            platinumClick: { name: "Golden Tool", baseCost: 2500, addClick: 50, addAuto: 0 },
            hyperAutoClicker: { name: "Broken Machinery", baseCost: 5000, addClick: 0, addAuto: 50 },
            diamondClick: { name: "Platinum Tool", baseCost: 10000, addClick: 100, addAuto: 0 },
            ultimateAutoClicker: { name: "Mended Machinery", baseCost: 20000, addClick: 0, addAuto: 200 },
            galacticClick: { name: "Radioactive Tool", baseCost: 50000, addClick: 500, addAuto: 0 },
            cosmicAutoClicker: { name: "Diamond Machinery", baseCost: 100000, addClick: 0, addAuto: 500 },
            universalClick: { name: "Nuclear Tool", baseCost: 250000, addClick: 1000, addAuto: 0 },
            infinityAutoClicker: { name: "New Factory Branch", baseCost: 500000, addClick: 0, addAuto: 1000 },
            omegaClick: { name: "Plasma Tool", baseCost: 1000000, addClick: 5000, addAuto: 0 }
        };

        // Initialize state
        let inventory = {};
        Object.keys(upgradeData).forEach(id => inventory[id] = 0);

        // --- CORE FUNCTIONS ---

        function calculateCost(id) {
            return Math.round(upgradeData[id].baseCost * Math.pow(1.15, inventory[id]));
        }

        function updateUI() {
            document.getElementById('clickCount').textContent = Math.floor(clicks).toLocaleString();
            document.getElementById('cpsCount').textContent = autoClickValue.toLocaleString();
            document.getElementById('circle').textContent = `+${clickValue}`;

            // Update Shop Buttons
            Object.keys(upgradeData).forEach(id => {
                const btn = document.getElementById(id);
                const countText = document.getElementById(`${id}-count`);
                const cost = calculateCost(id);
                
                btn.textContent = `${upgradeData[id].name} (${cost} clicks)`;
                countText.textContent = `Owned: ${inventory[id]}`;

                if (clicks >= cost) {
                    btn.classList.remove('disabled');
                    btn.disabled = false;
                } else {
                    btn.classList.add('disabled');
                    btn.disabled = true;
                }
            });
        }

        function buyUpgrade(id) {
            const cost = calculateCost(id);
            if (clicks >= cost) {
                clicks -= cost;
                inventory[id]++;
                
                // Apply effects
                clickValue += upgradeData[id].addClick;
                autoClickValue += upgradeData[id].addAuto;
                
                updateUI();
                saveGame();
            }
        }

        // --- SAVE/LOAD SYSTEM ---

        function saveGame() {
            const saveData = {
                clicks: clicks,
                inventory: inventory,
                // We recalculate clickValue/autoClickValue on load to prevent bugs
            };
            localStorage.setItem("IndustrialClicker_v1", JSON.stringify(saveData));
        }

        function loadGame() {
            const saved = localStorage.getItem("IndustrialClicker_v1");
            if (saved) {
                const data = JSON.parse(saved);
                clicks = data.clicks || 0;
                inventory = data.inventory || inventory;

                // Re-calculate total powers from inventory
                clickValue = 1;
                autoClickValue = 0;
                Object.keys(inventory).forEach(id => {
                    clickValue += (upgradeData[id].addClick * inventory[id]);
                    autoClickValue += (upgradeData[id].addAuto * inventory[id]);
                });
            }
            updateUI();
        }

        // --- INITIALIZATION ---

        // Create Shop HTML
        const shopList = document.getElementById('shop-list');
        Object.keys(upgradeData).forEach(id => {
            const container = document.createElement('div');
            container.className = 'shop-item-container';
            container.innerHTML = `
                <button class="shop-item" id="${id}"></button>
                <div class="upgrade-count" id="${id}-count">Owned: 0</div>
            `;
            shopList.appendChild(container);
            
            document.getElementById(id).addEventListener('click', () => buyUpgrade(id));
        });

        // Main Click
        document.getElementById('circle').addEventListener('click', () => {
            clicks += clickValue;
            updateUI();
        });

        // Reset
        document.getElementById('resetButton').addEventListener('click', () => {
            if(confirm("Reset all industrial progress?")) {
                localStorage.removeItem("IndustrialClicker_v1");
                location.reload();
            }
        });

        // Game Loop (Every 1 second)
        setInterval(() => {
            clicks += autoClickValue;
            updateUI();
        }, 1000);

        // Auto-Save Loop (Every 15 seconds)
        setInterval(saveGame, 15000);

        // Startup
        loadGame();

    </script>
</body>
</html>
