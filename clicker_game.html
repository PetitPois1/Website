<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Clicker: Quantum Evolution</title>
    <style>
        :root {
            --primary: #66cc66;
            --bg-dark: #1b2a1d;
            --panel-bg: rgba(0, 0, 0, 0.85);
            --border: #2d4a30;
            --save-color: #44aaff;
            --quantum: #b300ff;
            --gold: #ffd700;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-dark);
            font-family: 'Segoe UI', sans-serif;
            color: white;
            overflow-x: hidden;
        }

        /* Header & Stats */
        .header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 650px;
            border: 1px solid var(--border);
            position: sticky;
            top: 10px;
            z-index: 100;
            backdrop-filter: blur(8px);
        }

        .credit-display { font-size: 2.5rem; font-weight: bold; color: white; margin: 0; }
        .production-display { color: var(--primary); font-size: 1rem; margin-top: 5px; }

        /* Navigation */
        .nav-bar { display: flex; gap: 10px; margin-bottom: 20px; }
        .nav-btn {
            background: #222;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
        }

        .buy-modes { display: flex; gap: 8px; margin-bottom: 20px; }
        .mode-btn {
            background: #111;
            border: 1px solid #444;
            color: #888;
            padding: 6px 12px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        .mode-btn.active { border-color: var(--primary); color: var(--primary); background: #1b2a1d; }

        /* Click Area */
        .click-area { height: 220px; display: flex; justify-content: center; align-items: center; margin-bottom: 20px; }
        #circle {
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
            padding: 15px;
        }
        #circle:active { transform: scale(0.9); }

        /* Shapes */
        .tier-0 { border-radius: 50%; background: #554433; border: 6px solid #332211; }
        .tier-1 { border-radius: 50%; background: #b87333; border: 4px solid #e39a5d; }
        .tier-2 { border-radius: 15%; background: #a19d94; border: 4px solid #ced4da; }
        .tier-3 { border-radius: 5px;  background: #4682b4; border: 4px solid #87ceeb; }
        .tier-4 { clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%); background: #ffd700; color: black; }
        .tier-5 { clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); background: #00f2ff; color: black; }
        .tier-6 { border-radius: 50% 0 50% 0; background: #e0e0e0; border: 4px solid #ff0055; color: black; }
        .tier-7 { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); background: #111; border: 2px solid #00ff00; }
        .tier-8 { clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); background: #fff; color: black; }
        .tier-9 { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; background: var(--quantum); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* Shop & Overlay */
        .shop { width: 100%; max-width: 700px; }
        .section-title { color: var(--primary); border-bottom: 1px solid var(--border); margin: 25px 0 10px; padding-bottom: 5px; font-size: 1rem; }

        .upgrade-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: 15px;
        }

        .upgrade-info h3 { margin: 0; color: var(--primary); font-size: 1rem; }
        .upgrade-info p { margin: 4px 0; font-size: 0.8rem; color: #aaa; }
        .upgrade-stats { font-size: 0.8rem; color: var(--primary); font-weight: bold; }

        .buy-btn {
            background: #0a3d0a;
            color: white;
            border: 1px solid var(--primary);
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            min-width: 140px;
            font-weight: bold;
        }
        .buy-btn.disabled { opacity: 0.2; cursor: not-allowed; }

        /* Settings Overlay */
        #settings-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            overflow-y: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #333;
        }

        .stat-box h4 { margin: 0; color: #888; font-size: 0.8rem; }
        .stat-box p { margin: 5px 0 0; font-size: 1.2rem; font-weight: bold; color: var(--primary); }

        .achievements-list {
            width: 100%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .ach-item {
            background: #111;
            padding: 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 15px;
            opacity: 0.4;
            border: 1px solid #222;
        }

        .ach-item.unlocked { opacity: 1; border-color: var(--gold); background: #1a1a00; }
        .ach-icon { font-size: 1.5rem; }
        .ach-text h4 { margin: 0; font-size: 0.9rem; }
        .ach-text p { margin: 2px 0 0; font-size: 0.75rem; color: #888; }

        /* Toast */
        #toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--save-color);
            padding: 12px 20px;
            border-radius: 4px;
            font-weight: bold;
            opacity: 0;
            transition: 0.4s;
            z-index: 2000;
        }
        #toast.show { opacity: 1; }

        .floating-text {
            position: absolute;
            color: var(--primary);
            font-weight: bold;
            pointer-events: none;
            animation: float 0.7s forwards;
        }
        @keyframes float { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-80px); opacity: 0; } }

        .close-btn { margin-bottom: 30px; padding: 10px 30px; }
        .danger-zone { margin-top: 50px; border-top: 1px solid #444; padding-top: 20px; }
    </style>
</head>
<body>

    <div id="toast">Saved</div>

    <div id="settings-overlay">
        <button class="nav-btn close-btn" onclick="toggleSettings()">BACK TO FACTORY</button>
        
        <h2 class="section-title">FACTORY RECORDS</h2>
        <div class="stats-grid">
            <div class="stat-box"><h4>All-Time Credits</h4><p id="stat-alltime">0</p></div>
            <div class="stat-box"><h4>Total Clicks</h4><p id="stat-clicks">0</p></div>
            <div class="stat-box"><h4>Playtime</h4><p id="stat-time">0m</p></div>
            <div class="stat-box"><h4>Production</h4><p id="stat-cps">0/s</p></div>
        </div>

        <h2 class="section-title">ACHIEVEMENTS</h2>
        <div class="achievements-list" id="ach-container"></div>

        <div class="danger-zone">
            <button class="nav-btn" onclick="manualSave()" style="border-color: var(--save-color); color: var(--save-color);">MANUAL SAVE</button>
            <button class="nav-btn" onclick="resetGame()" style="border-color: #ff5555; color: #ff5555; margin-left: 10px;">HARD RESET</button>
        </div>
    </div>

    <div class="header">
        <div class="credit-display" id="creditCount">0 Credits</div>
        <div class="production-display">Production: <span id="cpsCount">0</span>/sec</div>
    </div>

    <div class="nav-bar">
        <button class="nav-btn" onclick="toggleSettings()">STATS & SETTINGS</button>
    </div>

    <div class="buy-modes">
        <button id="mode-1" class="mode-btn active" onclick="setBuyMode(1)">x1</button>
        <button id="mode-10" class="mode-btn" onclick="setBuyMode(10)">x10</button>
        <button id="mode-100" class="mode-btn" onclick="setBuyMode(100)">x100</button>
        <button id="mode-max" class="mode-btn" onclick="setBuyMode('max')">MAX</button>
    </div>

    <div class="click-area">
        <div id="circle" class="tier-0">STONE</div>
    </div>

    <div class="shop">
        <h2 class="section-title">TECHNOLOGY TIERS</h2>
        <div id="tier-container"></div>
        <h2 class="section-title">FACTORY INFRASTRUCTURE</h2>
        <div id="machine-container"></div>
    </div>

    <script>
        // State
        let credits = 0;
        let totalEarned = 0;
        let totalClicks = 0;
        let playTimeSeconds = 0;
        let buyMode = 1;
        let currentTier = 0;
        const growthRate = 1.15;

        // Achievements Definition
        const achievements = [
            { id: 'first_click', name: "Industrialist", desc: "Click for the first time", icon: "üî®", check: () => totalClicks >= 1 },
            { id: 'rich_1k', name: "Small Business", desc: "Earn 1,000 credits all-time", icon: "üí∞", check: () => totalEarned >= 1000 },
            { id: 'rich_1m', name: "Millionaire", desc: "Earn 1,000,000 credits all-time", icon: "üíé", check: () => totalEarned >= 1000000 },
            { id: 'clicker_100', name: "Manual Labor", desc: "Click 100 times", icon: "üñ±Ô∏è", check: () => totalClicks >= 100 },
            { id: 'tier_copper', name: "Smelter", desc: "Unlock Copper Tier", icon: "üî•", check: () => currentTier >= 1 },
            { id: 'tier_quantum', name: "God of Industry", desc: "Unlock Quantum Tier", icon: "üåå", check: () => currentTier >= 9 },
            { id: 'cps_100', name: "Automation", desc: "Reach 100 CPS", icon: "‚öôÔ∏è", check: () => window.currentCps >= 100 },
            { id: 'cps_10k', name: "Super Factory", desc: "Reach 10,000 CPS", icon: "üè≠", check: () => window.currentCps >= 10000 },
            { id: 'time_10m', name: "Dedicated", desc: "Play for 10 minutes", icon: "‚è≥", check: () => playTimeSeconds >= 600 },
            { id: 'machine_100', name: "Mass Production", desc: "Own 100 of any machine", icon: "üì¶", check: () => Object.values(inventory).some(v => v >= 100) },
            { id: 'hoarder', name: "Hoarder", desc: "Have 50,000 credits in the bank", icon: "üè¶", check: () => credits >= 50000 },
            { id: 'quantum_rich', name: "Beyond Wealth", desc: "Earn 1 Billion credits", icon: "‚ú®", check: () => totalEarned >= 1000000000 }
        ];
        let unlockedAchievements = [];

        // Data
        const tierUpgrades = [
            { name: "Copper Tools", cost: 100, clickBoost: 8, label: "COPPER", class: "tier-1", desc: "Basic metalwork." },
            { name: "Iron Forge", cost: 1500, clickBoost: 45, label: "IRON", class: "tier-2", desc: "Heavy industrial strength." },
            { name: "Steel Refining", cost: 15000, clickBoost: 250, label: "STEEL", class: "tier-3", desc: "Durable high-grade alloy." },
            { name: "Micro-Circuitry", cost: 100000, clickBoost: 1200, label: "GOLD", class: "tier-4", desc: "Digital logic gates." },
            { name: "Silicon Processing", cost: 750000, clickBoost: 6000, label: "DATA", class: "tier-5", desc: "Super-conductive clicking." },
            { name: "Nanotech Assembly", cost: 5000000, clickBoost: 35000, label: "NANO", class: "tier-6", desc: "Atomic manipulation." },
            { name: "Fusion Ignition", cost: 50000000, clickBoost: 200000, label: "FUSION", class: "tier-7", desc: "Miniature sun power." },
            { name: "Antimatter Drive", cost: 500000000, clickBoost: 1500000, label: "VOID", class: "tier-8", desc: "Annihilation energy." },
            { name: "Quantum Core", cost: 10000000000, clickBoost: 10000000, label: "QUANTUM", class: "tier-9", desc: "Infinite states." }
        ];

        const machineUpgrades = {
            manual: { name: "Manual Crank", desc: "Hand-powered generator.", baseCost: 15, addAuto: 1 },
            steam: { name: "Steam Engine", desc: "First revolution heart.", baseCost: 250, addAuto: 10 },
            electric: { name: "Power Turbine", desc: "Steady electricity.", baseCost: 2000, addAuto: 65 },
            diesel: { name: "Diesel Gen", desc: "Heavy fuel yield.", baseCost: 18000, addAuto: 420 },
            hydro: { name: "Hydro Dam", desc: "Flowing profit.", baseCost: 150000, addAuto: 2800 },
            nuclear: { name: "Fission Reactor", desc: "Splitting atoms.", baseCost: 1200000, addAuto: 18000 },
            thermal: { name: "Geothermal Plant", desc: "Planetary heat.", baseCost: 15000000, addAuto: 115000 },
            orbital: { name: "Solar Satellite", desc: "Beaming orbit power.", baseCost: 250000000, addAuto: 950000 },
            particle: { name: "Hadron Collider", desc: "Smashing for profit.", baseCost: 5000000000, addAuto: 12000000 },
            singularity: { name: "Singularity Well", desc: "Black hole energy.", baseCost: 100000000000, addAuto: 350000000 }
        };

        let inventory = {};
        Object.keys(machineUpgrades).forEach(id => inventory[id] = 0);

        // UI & Logic
        function toggleSettings() {
            const el = document.getElementById('settings-overlay');
            const isOpening = el.style.display !== 'flex';
            el.style.display = isOpening ? 'flex' : 'none';
            if(isOpening) updateStatsPage();
        }

        function setBuyMode(mode) {
            buyMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`mode-${mode}`).classList.add('active');
            updateUI();
        }

        function getCostOfMany(id, amount) {
            let n = inventory[id], b = machineUpgrades[id].baseCost, r = growthRate;
            if (amount === 'max') {
                amount = Math.max(0, Math.floor(Math.log(((credits * (r - 1)) / (b * Math.pow(r, n))) + 1) / Math.log(r)));
                if (amount === 0) return { cost: b * Math.pow(r, n), count: 1 };
            }
            return { cost: b * (Math.pow(r, n) * (Math.pow(r, amount) - 1)) / (r - 1), count: amount };
        }

        function updateUI() {
            document.getElementById('creditCount').innerText = `${Math.floor(credits).toLocaleString()} Credits`;
            let totalCps = 0;
            Object.keys(machineUpgrades).forEach(id => totalCps += machineUpgrades[id].addAuto * inventory[id]);
            document.getElementById('cpsCount').innerText = Math.floor(totalCps).toLocaleString();
            window.currentCps = totalCps;

            let totalClick = 1;
            for(let i=0; i < currentTier; i++) totalClick += tierUpgrades[i].clickBoost;
            window.currentClickValue = totalClick;

            // Machines
            Object.keys(machineUpgrades).forEach(id => {
                const buyData = getCostOfMany(id, buyMode);
                const btn = document.getElementById(`btn-${id}`);
                btn.innerHTML = `Buy ${buyData.count}<br>${Math.round(buyData.cost).toLocaleString()} C`;
                btn.className = (credits >= buyData.cost && buyData.count > 0) ? "buy-btn" : "buy-btn disabled";
                btn.onclick = () => { if(credits >= buyData.cost) { credits -= buyData.cost; inventory[id] += buyData.count; updateUI(); } };
                document.getElementById(`count-${id}`).innerHTML = `Owned: ${inventory[id]} (+${machineUpgrades[id].addAuto}/s)`;
            });

            // Tiers
            const tierBox = document.getElementById('tier-container');
            if (currentTier < tierUpgrades.length) {
                const next = tierUpgrades[currentTier];
                tierBox.innerHTML = `<div class="upgrade-card"><div class="upgrade-info"><h3>Next: ${next.name}</h3><p>${next.desc}</p></div><button class="buy-btn ${credits < next.cost ? 'disabled' : ''}" onclick="evolveTier()">Evolve<br>${next.cost.toLocaleString()} C</button></div>`;
            } else tierBox.innerHTML = `<p style="text-align:center; color:var(--quantum);">MAX TIER</p>`;

            checkAchievements();
        }

        function evolveTier() {
            const next = tierUpgrades[currentTier];
            if (credits >= next.cost) {
                credits -= next.cost;
                currentTier++;
                const circle = document.getElementById('circle');
                circle.className = tierUpgrades[currentTier-1].class;
                circle.innerText = tierUpgrades[currentTier-1].label;
                updateUI();
                saveGame(true);
            }
        }

        function checkAchievements() {
            achievements.forEach(ach => {
                if(!unlockedAchievements.includes(ach.id) && ach.check()) {
                    unlockedAchievements.push(ach.id);
                    notify(`Achievement: ${ach.name}`);
                }
            });
        }

        function updateStatsPage() {
            document.getElementById('stat-alltime').innerText = Math.floor(totalEarned).toLocaleString();
            document.getElementById('stat-clicks').innerText = totalClicks.toLocaleString();
            document.getElementById('stat-cps').innerText = Math.floor(window.currentCps).toLocaleString();
            const mins = Math.floor(playTimeSeconds / 60);
            document.getElementById('stat-time').innerText = `${mins}m ${playTimeSeconds % 60}s`;

            const container = document.getElementById('ach-container');
            container.innerHTML = '';
            achievements.forEach(ach => {
                const isUnlocked = unlockedAchievements.includes(ach.id);
                container.innerHTML += `
                    <div class="ach-item ${isUnlocked ? 'unlocked' : ''}">
                        <div class="ach-icon">${isUnlocked ? ach.icon : '‚ùì'}</div>
                        <div class="ach-text">
                            <h4>${isUnlocked ? ach.name : '???'}</h4>
                            <p>${ach.desc}</p>
                        </div>
                    </div>`;
            });
        }

        function notify(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function saveGame(silent = false) {
            const data = { credits, totalEarned, totalClicks, playTimeSeconds, inventory, currentTier, unlockedAchievements };
            localStorage.setItem("IndusQuantum_V10", JSON.stringify(data));
            if(!silent) notify("Factory Saved");
        }

        function manualSave() { saveGame(); }

        function loadGame() {
            const data = JSON.parse(localStorage.getItem("IndusQuantum_V10"));
            if(data) {
                credits = data.credits || 0;
                totalEarned = data.totalEarned || 0;
                totalClicks = data.totalClicks || 0;
                playTimeSeconds = data.playTimeSeconds || 0;
                inventory = data.inventory || inventory;
                currentTier = data.currentTier || 0;
                unlockedAchievements = data.unlockedAchievements || [];
                if(currentTier > 0) {
                    const circle = document.getElementById('circle');
                    circle.className = tierUpgrades[currentTier-1].class;
                    circle.innerText = tierUpgrades[currentTier-1].label;
                }
            }
            updateUI();
        }

        function resetGame() {
            if(confirm("Wipe all progress, stats, and achievements?")) {
                localStorage.clear();
                location.reload();
            }
        }

        // Init
        const mBox = document.getElementById('machine-container');
        Object.keys(machineUpgrades).forEach(id => {
            mBox.innerHTML += `<div class="upgrade-card"><div class="upgrade-info"><h3>${machineUpgrades[id].name}</h3><p>${machineUpgrades[id].desc}</p><div class="upgrade-stats" id="count-${id}"></div></div><button class="buy-btn" id="btn-${id}"></button></div>`;
        });

        document.getElementById('circle').addEventListener('click', (e) => {
            credits += window.currentClickValue;
            totalEarned += window.currentClickValue;
            totalClicks++;
            const t = document.createElement('div');
            t.className = 'floating-text';
            t.innerText = `+${window.currentClickValue.toLocaleString()}`;
            t.style.left = e.clientX + 'px'; t.style.top = e.clientY + 'px';
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 700);
            updateUI();
        });

        // Intervals
        setInterval(() => { 
            if(window.currentCps > 0) { 
                let gain = window.currentCps / 10;
                credits += gain; totalEarned += gain;
                updateUI(); 
            } 
        }, 100);

        setInterval(() => { playTimeSeconds++; }, 1000);
        setInterval(() => saveGame(true), 60000);

        loadGame();
    </script>
</body>
</html>
