...
        // Handle cell clicks
        function handleCellClick(index) {
            if (gameBoard[index] !== null || isGameOver) return;

            gameBoard[index] = currentPlayer;
            renderBoard();
            checkForWinner();

            if (difficulty === 'coop') { // 2-player mode
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            } else if (currentPlayer === 'X') {
                currentPlayer = 'O';
                aiMove();
            } else {
                currentPlayer = 'X';
            }
            updateTurnIndicator();
        }

        // Update turn indicator
        function updateTurnIndicator() {
            if (isGameOver) return;
            turnIndicator.textContent = `Player ${currentPlayer}'s Turn`;
        }

        // Check for winner or tie
        function checkForWinner() {
            const winningCombinations = [
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                [0, 4, 8],
                [2, 4, 6],
            ];

            for (let combo of winningCombinations) {
                const [a, b, c] = combo;
                if (gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c]) {
                    turnIndicator.textContent = `${gameBoard[a]} wins!`;
                    if (gameBoard[a] === 'X') xScore++;
                    else oScore++;
                    renderBoard();
                    updateScores();
                    showWinnerMessage(`${gameBoard[a]} Wins!`);
                    isGameOver = true; // Mark game over
                    return;
                }
            }

            if (!gameBoard.includes(null)) {
                turnIndicator.textContent = 'It\'s a tie!';
                showWinnerMessage('It\'s a Tie!');
                isGameOver = true; // Mark game over
            }
        }

        // Difficulty change handler
        difficultySelect.addEventListener('change', (event) => {
            difficulty = event.target.value;
            aiDifficulty = difficulty === "coop" ? "2 Player" : difficulty.charAt(0).toUpperCase() + difficulty.slice(1); // Proper naming
            resetGame();
        });
...
